# CV车辆识别 - 数据下载和训练指南

## 📥 第一步：下载数据

### 百度网盘下载步骤

1. **打开百度网盘链接**：
   - 链接: https://pan.baidu.com/s/1GnQ0aUciBN1_x85Qn-swWg
   - 提取码: **3rms**

2. **下载文件**：
   - 找到 "CV-车辆检测" 文件夹（或类似名称）
   - 点击下载

3. **解压文件**：
   - 将下载的文件解压到以下目录：
   ```
   C:\baidunetdiskdownload\CV-车辆检测\
   ```

4. **确认目录结构**：
   解压后应该有以下结构：
   ```
   C:\baidunetdiskdownload\CV-车辆检测\
   ├── re_id_1000_train.txt    # 训练索引文件
   ├── re_id_1000_test.txt      # 测试索引文件
   └── image\                   # 图像文件夹
       ├── 1\                   # 丰田_凯美瑞
       ├── 2\                   # 丰田_卡罗拉
       ├── 3\                   # 丰田_花冠
       ├── 4\                   # 别克_君越
       ├── 5\                   # 大众_迈腾
       ├── 6\                   # 奥迪_A4
       ├── 7\                   # 日产_轩逸
       ├── 8\                   # 日产_骐达
       ├── 9\                   # 本田_雅阁
       └── 10\                  # 福特_福克斯
   ```

## ✅ 第二步：检查数据文件

下载完成后，运行检查脚本：

```bash
python check_data.py
```

或者双击运行：
```bash
download_and_train.bat
```

检查脚本会自动：
- ✅ 检查数据目录是否存在
- ✅ 检查训练和测试索引文件
- ✅ 检查图像文件夹
- ✅ 统计样本数量

## 🚀 第三步：开始训练

### 方法一：使用批处理脚本（推荐）

```bash
download_and_train.bat
```

这个脚本会自动：
1. 检查数据文件
2. 检查Python环境
3. 安装依赖包（如果需要）
4. 开始训练

### 方法二：手动运行

```bash
# 1. 检查数据
python check_data.py

# 2. 安装依赖（如果需要）
pip install -r requirements.txt

# 3. 开始训练
python main.py
```

或者使用：
```bash
run.bat
```

## 📊 训练过程

训练过程中会显示：
- 数据加载进度
- 模型训练进度
- 每个epoch的准确率
- 自动调参过程
- 最终评估结果

## 📁 训练结果

训练完成后，结果会保存在：

- **模型文件**: `models/vehicle_classifier_YYYYMMDD_HHMMSS.pth`
- **结果文件**: `results/results_YYYYMMDD_HHMMSS.json`

## ⚠️ 注意事项

1. **数据路径**：确保数据解压到 `C:\baidunetdiskdownload\CV-车辆检测\`
2. **GPU支持**：如果有NVIDIA GPU，训练会更快
3. **训练时间**：完整训练可能需要数小时，请耐心等待
4. **准确率要求**：如果准确率<80%，程序会自动调参重训练

## 🆘 遇到问题？

### 问题1：数据文件找不到
- 检查数据是否已解压到正确目录
- 确认目录路径是否正确

### 问题2：Python依赖包错误
```bash
pip install -r requirements.txt
```

### 问题3：GPU不可用
- 程序会自动使用CPU（速度较慢）
- 检查NVIDIA驱动和CUDA是否正确安装

---

**下载完成后，运行 `python check_data.py` 检查数据，然后运行 `python main.py` 开始训练！**

